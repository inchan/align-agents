# MCP UI 시나리오 테스트

## 목차

- [개요](#개요)
- [테스트 환경](#테스트-환경)
- [기능 매트릭스](#기능-매트릭스)
- [우선순위 정의](#우선순위-정의)
- [시나리오 목록](#시나리오-목록)
  - [M-001: MCP 서버 목록 조회](#m-001-mcp-서버-목록-조회)
  - [M-002: MCP 서버 선택 및 상세 보기](#m-002-mcp-서버-선택-및-상세-보기)
  - [M-003: MCP 서버 추가 - 모달 열기/닫기](#m-003-mcp-서버-추가---모달-열기닫기)
  - [M-004: MCP 서버 추가 - 성공 케이스](#m-004-mcp-서버-추가---성공-케이스)
  - [M-005: MCP 서버 추가 - 환경변수 포함](#m-005-mcp-서버-추가---환경변수-포함)
  - [M-006: MCP 서버 편집 모드 진입](#m-006-mcp-서버-편집-모드-진입)
  - [M-007: MCP 서버 편집 - 저장 성공](#m-007-mcp-서버-편집---저장-성공)
  - [M-008: MCP 서버 편집 - 취소](#m-008-mcp-서버-편집---취소)
  - [M-009: MCP 서버 삭제 - 확인 다이얼로그](#m-009-mcp-서버-삭제---확인-다이얼로그)
  - [M-010: MCP 서버 삭제 - 성공 케이스](#m-010-mcp-서버-삭제---성공-케이스)
  - [M-011: MCP 서버 검색/필터](#m-011-mcp-서버-검색필터)
  - [M-012: MCP JSON 전체 편집](#m-012-mcp-json-전체-편집)
- [유효성 검증 시나리오](#유효성-검증-시나리오)
  - [M-013: 빈 서버 이름으로 추가 시도](#m-013-빈-서버-이름으로-추가-시도)
  - [M-014: 빈 command로 추가 시도](#m-014-빈-command로-추가-시도)
  - [M-015: 중복 서버 이름으로 추가 시도](#m-015-중복-서버-이름으로-추가-시도)
  - [M-016: 잘못된 JSON 형식 입력](#m-016-잘못된-json-형식-입력)
- [에러 처리 시나리오](#에러-처리-시나리오)
  - [M-017: 에러 처리 - 추가 실패](#m-017-에러-처리---추가-실패)
  - [M-018: 에러 처리 - 저장 실패](#m-018-에러-처리---저장-실패)
  - [M-019: 에러 처리 - 삭제 실패](#m-019-에러-처리---삭제-실패)
- [엣지 케이스 시나리오](#엣지-케이스-시나리오)
  - [M-020: 빈 MCP 목록 상태](#m-020-빈-mcp-목록-상태)
  - [M-021: 긴 서버 이름 처리](#m-021-긴-서버-이름-처리)
  - [M-022: 다수의 args 처리](#m-022-다수의-args-처리)
  - [M-023: 특수문자 포함 서버 이름](#m-023-특수문자-포함-서버-이름)
  - [M-024: 대용량 MCP 목록 (50개 이상)](#m-024-대용량-mcp-목록-50개-이상)
- [Import/Export 시나리오](#importexport-시나리오)
  - [M-025: JSON 파일 Import](#m-025-json-파일-import)
  - [M-026: Import 시 중복 서버 처리](#m-026-import-시-중복-서버-처리)
  - [M-027: MCP 설정 Export](#m-027-mcp-설정-export)
- [HTTP/SSE 타입 시나리오](#httpsse-타입-시나리오)
  - [M-030: HTTP 타입 MCP 서버 추가](#m-030-http-타입-mcp-서버-추가)
  - [M-031: SSE 타입 MCP 서버 추가](#m-031-sse-타입-mcp-서버-추가)
  - [M-032: 타입별 필수 필드 유효성 검증](#m-032-타입별-필수-필드-유효성-검증)
  - [M-033: 타입 변경 시 필드 전환 확인](#m-033-타입-변경-시-필드-전환-확인)
- [접근성 시나리오](#접근성-시나리오)
  - [M-028: 키보드 네비게이션](#m-028-키보드-네비게이션)
  - [M-029: 긴 이름 Tooltip 확인](#m-029-긴-이름-tooltip-확인)
- [테스트 데이터 Setup](#테스트-데이터-setup)
- [테스트 실행 방법](#테스트-실행-방법)
- [버전 이력](#버전-이력)

---

## 개요

이 문서는 align-agents의 **MCP 관리 페이지** UI 시나리오 테스트를 정의합니다.
`McpPage.tsx` 컴포넌트의 MCP 서버 CRUD 및 관련 기능을 커버합니다.

> **범위**: MCP 메뉴 내 기능만 다룹니다. 동기화(Sync) 기능은 별도 문서에서 다룹니다.

---

## 테스트 환경

- **도구**: Playwright
- **대상 페이지**: `/mcp`
- **베이스 URL**: http://localhost:5173
- **API 서버**: http://localhost:3003

---

## 기능 매트릭스

| 기능 | 시나리오 번호 | 우선순위 |
|------|---------------|----------|
| MCP 서버 목록 조회 | M-001 | P0 |
| MCP 서버 선택 및 보기 | M-002 | P0 |
| MCP 서버 추가 | M-003, M-004, M-005 | P0 |
| MCP 서버 편집 | M-006, M-007, M-008 | P0 |
| MCP 서버 삭제 | M-009, M-010 | P0 |
| 검색/필터 | M-011 | P1 |
| JSON 전체 편집 | M-012 | P1 |
| 유효성 검증 | M-013, M-014, M-015, M-016 | P0 |
| 에러 처리 | M-017, M-018, M-019 | P1 |
| 엣지 케이스 | M-020 ~ M-024 | P2 |
| Import/Export | M-025, M-026, M-027 | P1 |
| HTTP/SSE 타입 | M-030, M-031, M-032, M-033 | P1 |
| 접근성 | M-028, M-029 | P2 |

---

## 우선순위 정의

| 우선순위 | 설명 | 릴리즈 기준 |
|----------|------|-------------|
| **P0** | 핵심 기능, 데이터 무결성 | 필수 통과 |
| **P1** | 에러 처리, UX 안전장치 | 권장 통과 |
| **P2** | 부가 기능, 접근성 | 시간 허용 시 |

---

## 시나리오 목록

### M-001: MCP 서버 목록 조회

**우선순위**: P0
**카테고리**: Core

**목적**: MCP 페이지 접속 시 서버 목록이 올바르게 표시되는지 확인

**전제 조건**:
- API 서버 실행 중
- Master MCP에 최소 1개 이상의 서버 존재

**테스트 단계**:
1. `/mcp` 페이지 접속
2. 페이지 헤더에 "MCP Servers" 또는 유사 타이틀 확인
3. MCP 서버 목록이 표시되는지 확인
4. 각 서버 항목에 표시되는 정보 확인:
   - 서버 이름
   - command
   - args (있는 경우)
   - description (있는 경우)

**예상 결과**:
- [ ] MCP 서버 목록이 카드/리스트 형태로 표시됨
- [ ] 각 항목에 필수 정보(이름, command) 표시됨
- [ ] 로딩 중 스피너/스켈레톤 표시 후 목록 렌더링

**API 검증**:
- [ ] `GET /api/mcp` 호출 성공 (200)

---

### M-002: MCP 서버 선택 및 상세 보기

**우선순위**: P0
**카테고리**: Core

**목적**: MCP 서버 항목 클릭/선택 시 상세 정보가 표시되는지 확인

**전제 조건**:
- 최소 2개 이상의 MCP 서버 존재

**테스트 단계**:
1. MCP 페이지 접속
2. 첫 번째 서버 항목 클릭
3. 상세 정보 영역에 표시되는 내용 확인:
   - 서버 이름
   - command
   - args 배열
   - env (환경변수, 있는 경우)
   - description (있는 경우)
   - category (있는 경우)
4. 두 번째 서버 항목 클릭
5. 상세 정보가 두 번째 서버로 변경되는지 확인

**예상 결과**:
- [ ] 선택된 서버가 시각적으로 구분됨 (하이라이트/border)
- [ ] 상세 정보에 선택된 서버 정보 표시
- [ ] 서버 전환 시 상세 정보 즉시 업데이트

---

### M-003: MCP 서버 추가 - 모달 열기/닫기

**우선순위**: P0
**카테고리**: Core

**목적**: MCP 서버 추가 모달의 기본 동작 확인

**테스트 단계**:
1. MCP 페이지 접속
2. "Add Server" 또는 "+" 버튼 클릭
3. 서버 추가 모달/다이얼로그가 표시되는지 확인
4. 모달에 다음 입력 필드 확인:
   - Server Name (필수)
   - Command (필수)
   - Args
   - Environment Variables
   - Description
5. "Cancel" 버튼 클릭
6. 모달이 닫히는지 확인

**예상 결과**:
- [ ] "+" 또는 "Add" 버튼 클릭 시 모달 표시
- [ ] 모달에 필수 입력 필드 존재
- [ ] Cancel 클릭 시 모달 닫힘
- [ ] 모달 외부 클릭 시 닫힘 (선택적)

---

### M-004: MCP 서버 추가 - 성공 케이스

**우선순위**: P0
**카테고리**: Core

**목적**: 새 MCP 서버 추가가 정상적으로 작동하는지 확인

**테스트 단계**:
1. MCP 페이지 접속
2. "Add Server" 버튼 클릭
3. 다음 정보 입력:
   - Server Name: `test-server-001`
   - Command: `npx`
   - Args: `-y @modelcontextprotocol/server-test`
   - Description: `Test server for E2E`
4. "Add" 또는 "Create" 버튼 클릭
5. 토스트 메시지 확인
6. 모달이 닫히는지 확인
7. 목록에 새 서버가 추가되는지 확인

**예상 결과**:
- [ ] 서버 추가 성공
- [ ] 토스트 메시지 표시: "Server added successfully" 또는 유사
- [ ] 모달 닫힘
- [ ] 목록에 새 서버 즉시 표시
- [ ] 새 서버가 자동 선택됨 (선택적)

**API 검증**:
- [ ] `POST /api/mcp/add` 호출 성공 (200/201)

---

### M-005: MCP 서버 추가 - 환경변수 포함

**우선순위**: P0
**카테고리**: Core

**목적**: 환경변수가 포함된 MCP 서버 추가 확인

**테스트 단계**:
1. 서버 추가 모달 열기
2. 다음 정보 입력:
   - Server Name: `db-server`
   - Command: `npx`
   - Args: `-y @modelcontextprotocol/server-postgres`
3. 환경변수 섹션 확장 또는 "Add Variable" 클릭
4. 환경변수 추가:
   - Key: `DATABASE_URL`
   - Value: `postgres://localhost:5432/test`
5. 추가 환경변수:
   - Key: `API_KEY`
   - Value: `test-api-key-123`
6. "Add" 버튼 클릭
7. 추가된 서버 상세에서 환경변수 확인

**예상 결과**:
- [ ] 환경변수 입력 UI 정상 동작
- [ ] 여러 환경변수 추가 가능
- [ ] 저장 후 서버 상세에 env 필드 표시
- [ ] 환경변수 값 마스킹 처리 (선택적, 보안)

---

### M-006: MCP 서버 편집 모드 진입

**우선순위**: P0
**카테고리**: Core

**목적**: MCP 서버 편집 모드 진입이 정상 작동하는지 확인

**전제 조건**:
- 최소 1개의 MCP 서버 존재

**테스트 단계**:
1. MCP 페이지 접속
2. 서버 항목 선택
3. "Edit" 버튼 클릭 (또는 카드의 편집 아이콘)
4. 편집 모달/인라인 편집 UI 표시 확인
5. 기존 값이 입력 필드에 로드되는지 확인:
   - Server Name
   - Command
   - Args
   - Env
   - Description

**예상 결과**:
- [ ] 편집 모드 UI로 전환
- [ ] 기존 값이 모든 필드에 정확히 로드됨
- [ ] Save/Cancel 버튼 표시

---

### M-007: MCP 서버 편집 - 저장 성공

**우선순위**: P0
**카테고리**: Core

**목적**: MCP 서버 편집 후 저장이 정상 작동하는지 확인

**테스트 단계**:
1. MCP 페이지 접속
2. 서버 선택 후 "Edit" 클릭
3. Description 필드 수정: `Updated description for testing`
4. Args 값 수정 또는 추가
5. "Save" 버튼 클릭
6. 토스트 메시지 확인
7. 편집 모드 종료 확인
8. 변경된 내용이 반영되는지 확인

**예상 결과**:
- [ ] 저장 성공 토스트 표시
- [ ] 편집 모드 종료
- [ ] 변경 사항이 UI에 반영됨
- [ ] 페이지 새로고침 후에도 변경 사항 유지

**API 검증**:
- [ ] `POST /api/mcp` 호출 성공 (전체 저장)

---

### M-008: MCP 서버 편집 - 취소

**우선순위**: P1
**카테고리**: Core

**목적**: MCP 서버 편집 취소 시 변경 사항이 폐기되는지 확인

**테스트 단계**:
1. MCP 페이지 접속
2. 서버 선택 후 "Edit" 클릭
3. 여러 필드 수정 (저장하지 않음)
4. "Cancel" 버튼 클릭
5. 편집 모드 종료 확인
6. 원래 내용이 표시되는지 확인

**예상 결과**:
- [ ] 편집 모드 종료
- [ ] 변경 사항이 폐기됨
- [ ] 원래 서버 정보 유지

---

### M-009: MCP 서버 삭제 - 확인 다이얼로그

**우선순위**: P0
**카테고리**: Core

**목적**: MCP 서버 삭제 시 확인 다이얼로그가 표시되는지 확인

**전제 조건**:
- 삭제할 MCP 서버 존재

**테스트 단계**:
1. MCP 페이지 접속
2. 서버 항목의 삭제 버튼 (Trash 아이콘) 클릭
3. 확인 다이얼로그 표시 확인
4. 다이얼로그에 서버 이름이 표시되는지 확인
5. "Cancel" 버튼 클릭
6. 다이얼로그가 닫히고 서버가 유지되는지 확인

**예상 결과**:
- [ ] 삭제 버튼 클릭 시 확인 다이얼로그 표시
- [ ] 다이얼로그에 삭제 대상 서버 이름 표시
- [ ] "This action cannot be undone" 경고 문구 표시
- [ ] Cancel 시 삭제 취소

---

### M-010: MCP 서버 삭제 - 성공 케이스

**우선순위**: P0
**카테고리**: Core

**목적**: MCP 서버 삭제가 정상적으로 작동하는지 확인

**전제 조건**:
- 삭제 가능한 테스트 서버 존재

**테스트 단계**:
1. MCP 페이지 접속
2. 삭제할 서버의 삭제 버튼 클릭
3. 확인 다이얼로그에서 "Delete" 버튼 클릭
4. 토스트 메시지 확인
5. 목록에서 서버가 제거되는지 확인
6. 삭제된 서버가 선택 상태였다면 선택 해제 확인

**예상 결과**:
- [ ] 삭제 성공 토스트 표시
- [ ] 목록에서 서버 제거
- [ ] UI 상태 정상 업데이트

**API 검증**:
- [ ] `DELETE /api/mcp/:name` 호출 성공 (200)

---

### M-011: MCP 서버 검색/필터

**우선순위**: P1
**카테고리**: Feature

**목적**: MCP 서버 목록 검색/필터 기능 확인

**전제 조건**:
- 5개 이상의 MCP 서버 존재
- 검색 기능이 구현된 경우

**테스트 단계**:
1. MCP 페이지 접속
2. 검색 입력 필드 확인
3. 검색어 입력: `postgres`
4. 필터링된 결과 확인
5. 검색어 삭제
6. 전체 목록 복원 확인

**예상 결과**:
- [ ] 검색어 입력 시 실시간 필터링
- [ ] 서버 이름, command, description 기준 검색
- [ ] 검색 결과 없을 시 "No results" 메시지
- [ ] 검색어 삭제 시 전체 목록 복원

---

### M-012: MCP JSON 전체 편집

**우선순위**: P1
**카테고리**: Feature

**목적**: Master MCP JSON 전체를 직접 편집하는 기능 확인

**전제 조건**:
- JSON 편집 기능이 구현된 경우

**테스트 단계**:
1. MCP 페이지 접속
2. "JSON 편집" 또는 "Raw Editor" 버튼 클릭
3. Monaco Editor 또는 JSON 에디터 표시 확인
4. 현재 master-mcp.json 내용 로드 확인
5. 유효한 JSON으로 수정
6. "Save" 클릭
7. 목록에 변경 사항 반영 확인

**예상 결과**:
- [ ] JSON 에디터 정상 로드
- [ ] 현재 설정 내용 표시
- [ ] 신택스 하이라이팅 적용
- [ ] 저장 후 UI 목록 갱신

---

## 유효성 검증 시나리오

### M-013: 빈 서버 이름으로 추가 시도

**우선순위**: P0
**카테고리**: Validation

**목적**: 필수 필드 검증 확인

**테스트 단계**:
1. 서버 추가 모달 열기
2. Server Name 필드 비워두기
3. Command 입력: `npx`
4. "Add" 버튼 상태 확인

**예상 결과**:
- [ ] "Add" 버튼 비활성화 (disabled)
- [ ] 또는 오류 메시지 표시: "Server name is required"

---

### M-014: 빈 command로 추가 시도

**우선순위**: P0
**카테고리**: Validation

**목적**: command 필수 필드 검증 확인

**테스트 단계**:
1. 서버 추가 모달 열기
2. Server Name 입력: `test-server`
3. Command 필드 비워두기
4. "Add" 버튼 상태 확인

**예상 결과**:
- [ ] "Add" 버튼 비활성화 (disabled)
- [ ] 또는 오류 메시지 표시: "Command is required"

---

### M-015: 중복 서버 이름으로 추가 시도

**우선순위**: P0
**카테고리**: Validation

**목적**: 중복 이름 검증이 정상 작동하는지 확인

**전제 조건**:
- `existing-server`라는 이름의 서버가 이미 존재

**테스트 단계**:
1. 서버 추가 모달 열기
2. Server Name 입력: `existing-server` (기존과 동일)
3. Command 입력: `npx`
4. "Add" 버튼 클릭
5. 에러 처리 확인

**예상 결과**:
- [ ] 에러 메시지 표시: "Server name already exists" 또는 유사
- [ ] 서버 추가 실패
- [ ] 모달 유지 (이름 수정 가능)

---

### M-016: 잘못된 JSON 형식 입력

**우선순위**: P1
**카테고리**: Validation

**목적**: JSON 편집 시 유효성 검증 확인

**전제 조건**:
- JSON 전체 편집 기능 사용 (M-012)

**테스트 단계**:
1. JSON 편집 모드 진입
2. 유효하지 않은 JSON 입력:
   ```json
   { "mcpServers": { "test": { "command": "npx" }
   ```
   (닫는 중괄호 누락)
3. "Save" 버튼 상태 확인

**예상 결과**:
- [ ] 실시간 JSON 유효성 검사
- [ ] 오류 표시 (빨간색 밑줄 또는 에러 메시지)
- [ ] "Save" 버튼 비활성화

---

## 에러 처리 시나리오

### M-017: 에러 처리 - 추가 실패

**우선순위**: P1
**카테고리**: Error

**목적**: MCP 서버 추가 실패 시 에러 메시지가 표시되는지 확인

**테스트 단계**:
1. API 서버 중지 또는 네트워크 차단
2. 서버 추가 시도
3. "Add" 버튼 클릭
4. 에러 처리 확인

**예상 결과**:
- [ ] 에러 토스트 메시지 표시: "Failed to add server" 또는 유사
- [ ] 모달 유지 (재시도 가능)
- [ ] 입력한 데이터 유지

---

### M-018: 에러 처리 - 저장 실패

**우선순위**: P1
**카테고리**: Error

**목적**: MCP 서버 저장 실패 시 에러 메시지가 표시되는지 확인

**테스트 단계**:
1. 서버 편집 모드 진입
2. 내용 수정
3. API 서버 중지 또는 네트워크 차단
4. "Save" 버튼 클릭
5. 에러 처리 확인

**예상 결과**:
- [ ] 에러 토스트 메시지 표시
- [ ] 편집 모드 유지 (재시도 가능)
- [ ] 수정한 데이터 유지

---

### M-019: 에러 처리 - 삭제 실패

**우선순위**: P1
**카테고리**: Error

**목적**: MCP 서버 삭제 실패 시 에러 메시지가 표시되는지 확인

**테스트 단계**:
1. 삭제 확인 다이얼로그 열기
2. API 서버 중지 또는 네트워크 차단
3. "Delete" 버튼 클릭
4. 에러 처리 확인

**예상 결과**:
- [ ] 에러 토스트 메시지 표시
- [ ] 서버 목록 유지 (삭제되지 않음)
- [ ] 다이얼로그 닫힘 또는 재시도 가능

---

## 엣지 케이스 시나리오

### M-020: 빈 MCP 목록 상태

**우선순위**: P0
**카테고리**: Edge

**목적**: MCP 서버가 없을 때 적절한 안내가 표시되는지 확인

**전제 조건**:
- Master MCP에 서버가 없는 상태

**테스트 단계**:
1. MCP 페이지 접속
2. 빈 상태 UI 확인

**예상 결과**:
- [ ] "No MCP servers configured" 또는 유사 메시지 표시
- [ ] "Add Server" 버튼 또는 안내 표시
- [ ] Empty State 아이콘/일러스트 (선택적)

---

### M-021: 긴 서버 이름 처리

**우선순위**: P2
**카테고리**: Edge

**목적**: 긴 서버 이름이 UI에서 올바르게 처리되는지 확인

**테스트 단계**:
1. 50자 이상의 긴 이름으로 서버 추가:
   `this-is-a-very-long-server-name-that-should-be-truncated-in-ui`
2. 목록에서 표시 확인
3. 상세 정보에서 표시 확인

**예상 결과**:
- [ ] 목록: truncate 스타일로 말줄임 처리 (...)
- [ ] 상세: 전체 이름 표시 또는 적절히 줄바꿈
- [ ] Tooltip으로 전체 이름 확인 가능 (M-029에서 상세 검증)

---

### M-022: 다수의 args 처리

**우선순위**: P2
**카테고리**: Edge

**목적**: 많은 args가 있는 서버의 UI 표시 확인

**테스트 단계**:
1. 10개 이상의 args가 있는 서버 추가:
   ```
   -y @mcp/server --port 3000 --host localhost --debug --verbose --config /path/to/config.json --timeout 30000 --retry 3 --log-level debug
   ```
2. 목록 및 상세에서 표시 확인

**예상 결과**:
- [ ] args가 적절히 표시됨 (배열 또는 문자열)
- [ ] UI 레이아웃 깨지지 않음
- [ ] 스크롤 또는 더보기 기능 (필요시)

---

### M-023: 특수문자 포함 서버 이름

**우선순위**: P2
**카테고리**: Edge

**목적**: 특수문자가 포함된 서버 이름 처리 확인

**테스트 단계**:
1. 다음 이름으로 서버 추가 시도:
   - `test_server-v1.0`
   - `my-mcp-서버` (한글 포함)
   - `server@prod`
2. 추가 성공 여부 및 표시 확인

**예상 결과**:
- [ ] 허용된 문자: 영문, 숫자, 하이픈, 언더스코어
- [ ] 비허용 문자 시 오류 메시지 또는 sanitize
- [ ] XSS 방지: `<script>` 등 실행되지 않음

---

### M-024: 대용량 MCP 목록 (50개 이상)

**우선순위**: P2
**카테고리**: Edge / Performance

**목적**: 많은 서버가 있을 때 UI 성능 확인

**전제 조건**:
- 50개 이상의 MCP 서버 등록

**테스트 단계**:
1. MCP 페이지 접속
2. 로딩 시간 확인 (3초 이내 권장)
3. 스크롤 성능 확인
4. 검색/필터 성능 확인

**예상 결과**:
- [ ] 페이지 로딩 정상 (타임아웃 없음)
- [ ] 스크롤 버벅임 없음
- [ ] 검색 즉시 응답 (500ms 이내)
- [ ] 가상 스크롤 또는 페이지네이션 적용 (권장)

---

## Import/Export 시나리오

### M-025: JSON 파일 Import

**우선순위**: P1
**카테고리**: Feature

**목적**: JSON 파일에서 MCP 설정 Import 기능 확인

**전제 조건**:
- Import 기능이 구현된 경우
- 유효한 MCP JSON 파일 준비

**테스트 단계**:
1. MCP 페이지에서 "Import" 버튼 클릭
2. "JSON 파일" 옵션 선택
3. 파일 선택 다이얼로그에서 JSON 파일 선택
4. 파싱 결과 미리보기 확인
5. "Import" 확인 클릭
6. 서버들이 목록에 추가되는지 확인

**예상 결과**:
- [ ] 파일 선택 다이얼로그 표시
- [ ] 유효한 JSON만 허용
- [ ] Import 전 미리보기 표시 (선택적)
- [ ] 성공 시 서버 목록 갱신

---

### M-026: Import 시 중복 서버 처리

**우선순위**: P1
**카테고리**: Feature

**목적**: Import 시 기존 서버와 이름 충돌 처리 확인

**전제 조건**:
- `existing-server`가 이미 존재
- Import 파일에 `existing-server` 포함

**테스트 단계**:
1. 중복 서버가 포함된 JSON Import 시도
2. 충돌 처리 옵션 확인

**예상 결과**:
- [ ] 충돌 서버 목록 표시
- [ ] 처리 옵션 제공:
  - 모두 덮어쓰기
  - 모두 건너뛰기
  - 개별 선택
- [ ] 선택에 따른 결과 반영

---

### M-027: MCP 설정 Export

**우선순위**: P1
**카테고리**: Feature

**목적**: MCP 설정 Export 기능 확인

**전제 조건**:
- Export 기능이 구현된 경우

**테스트 단계**:
1. MCP 페이지에서 "Export" 버튼 클릭
2. Export 옵션 선택 (JSON 다운로드)
3. 파일 다운로드 확인
4. 다운로드된 파일 내용 검증

**예상 결과**:
- [ ] JSON 파일 다운로드됨
- [ ] 파일명에 날짜 또는 식별자 포함
- [ ] 파일 내용이 현재 설정과 일치

---

## HTTP/SSE 타입 시나리오

### M-030: HTTP 타입 MCP 서버 추가

**우선순위**: P1
**카테고리**: Feature

**목적**: HTTP 타입 MCP 서버 생성 기능 확인

**테스트 단계**:
1. MCP 페이지 접속
2. Set 생성 및 선택
3. Library 열기 후 "New" 버튼 클릭
4. Type 선택에서 "http" 버튼 클릭
5. Name 입력: `http-test-server`
6. URL 입력: `http://localhost:3000/mcp`
7. "Save" 버튼 클릭
8. Library에서 생성된 서버 확인

**예상 결과**:
- [ ] http 버튼 클릭 시 URL 입력 필드 표시
- [ ] Command/Args 필드 숨김
- [ ] 저장 성공 토스트 표시
- [ ] Library에 HTTP 타입 서버 표시 (Globe 아이콘)

---

### M-031: SSE 타입 MCP 서버 추가

**우선순위**: P1
**카테고리**: Feature

**목적**: SSE 타입 MCP 서버 생성 기능 확인

**테스트 단계**:
1. MCP 페이지 접속
2. Set 생성 및 선택
3. Library 열기 후 "New" 버튼 클릭
4. Type 선택에서 "sse" 버튼 클릭
5. Name 입력: `sse-test-server`
6. URL 입력: `http://localhost:3001/sse`
7. "Save" 버튼 클릭
8. Library에서 생성된 서버 확인

**예상 결과**:
- [ ] sse 버튼 클릭 시 URL 입력 필드 표시
- [ ] Command/Args 필드 숨김
- [ ] 저장 성공 토스트 표시
- [ ] Library에 SSE 타입 서버 표시 (Globe 아이콘)

---

### M-032: 타입별 필수 필드 유효성 검증

**우선순위**: P1
**카테고리**: Validation

**목적**: 각 타입에 맞는 필수 필드가 올바르게 표시되는지 확인

**테스트 단계**:
1. MCP Definition 생성 모달 열기
2. stdio 타입 (기본) - Command 필드 확인
3. http 타입 전환 - URL 필드 확인, Command 숨김
4. sse 타입 전환 - URL 필드 확인, Command 숨김
5. stdio 타입 재전환 - Command 필드 복원

**예상 결과**:
- [ ] stdio: Command + Arguments 필드 표시
- [ ] http: URL 필드만 표시
- [ ] sse: URL 필드만 표시
- [ ] 타입 전환 시 필드 즉시 변경

---

### M-033: 타입 변경 시 필드 전환 확인

**우선순위**: P1
**카테고리**: Feature

**목적**: 타입 변경 시 이전 타입의 필드 값이 초기화되는지 확인

**테스트 단계**:
1. MCP Definition 생성 모달 열기
2. stdio 타입에서 Command 입력: `test-command`
3. http 타입으로 변경
4. URL 필드가 빈 상태로 표시되는지 확인
5. URL 입력: `http://test-url.com/mcp`
6. 다시 stdio 타입으로 변경
7. Command 필드가 빈 상태로 표시되는지 확인

**예상 결과**:
- [ ] 타입 변경 시 이전 필드 값 초기화
- [ ] 새 타입의 필드는 빈 상태로 표시
- [ ] 데이터 오염 방지 (stdio 서버에 URL 없음)

---

## 접근성 시나리오

### M-028: 키보드 네비게이션

**우선순위**: P2
**카테고리**: Accessibility

**목적**: 키보드만으로 주요 기능 사용 가능 여부 확인

**테스트 단계**:
1. MCP 페이지 접속
2. Tab 키로 서버 목록 탐색
3. Enter 키로 서버 선택
4. Tab 키로 "Add", "Edit", "Delete" 버튼 이동
5. Enter 키로 버튼 실행
6. Esc 키로 모달 닫기

**예상 결과**:
- [ ] Tab으로 요소 간 이동 가능
- [ ] Enter로 선택/실행 가능
- [ ] Esc로 모달/다이얼로그 닫기 가능
- [ ] 포커스 표시가 시각적으로 명확함

---

### M-029: 긴 이름 Tooltip 확인

**우선순위**: P2
**카테고리**: Accessibility

**목적**: 말줄임 처리된 긴 이름의 전체 내용을 Tooltip으로 확인 가능한지 검증

**전제 조건**:
- M-021에서 생성한 긴 이름의 서버 존재

**테스트 단계**:
1. 목록에서 긴 이름 서버 항목에 마우스 호버
2. Tooltip 표시 여부 확인
3. Tooltip에 전체 이름이 표시되는지 확인

**예상 결과**:
- [ ] 호버 시 Tooltip 표시
- [ ] Tooltip에 전체 이름 표시
- [ ] `title` 속성 또는 커스텀 Tooltip 컴포넌트 사용

---

## 테스트 데이터 Setup

테스트 실행 전 다음 데이터가 준비되어야 합니다:

```
테스트용 MCP 서버 3개 사전 생성:
- "test-server-1" (command: npx, args: [-y, @mcp/test1])
- "test-server-2" (command: node, args: [server.js])
- "existing-server" (중복 테스트용)

API Mock 서버 또는 테스트 DB 초기화 스크립트 준비
```

**Setup 스크립트 예시**:
```bash
# 테스트 데이터 초기화
npm run test:setup

# E2E 테스트 실행
npm run test:e2e
```

**테스트용 master-mcp.json**:
```json
{
  "mcpServers": {
    "test-server-1": {
      "command": "npx",
      "args": ["-y", "@mcp/test1"],
      "description": "Test server 1"
    },
    "test-server-2": {
      "command": "node",
      "args": ["server.js"],
      "description": "Test server 2"
    },
    "existing-server": {
      "command": "npx",
      "args": ["-y", "@mcp/existing"],
      "description": "For duplicate name testing"
    }
  }
}
```

---

## 테스트 실행 방법

```bash
# E2E 테스트 실행
cd packages/web
npm run test:e2e

# 특정 시나리오만 실행
npm run test:e2e -- --grep "M-001"

# 우선순위별 실행
npm run test:e2e -- --grep "P0"

# MCP 관련 테스트만 실행
npm run test:e2e -- --grep "MCP"

# UI 모드로 실행
npm run test:e2e:ui

# 디버그 모드
npm run test:e2e:debug
```

---

## 버전 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| 1.0 | 2025-12-08 | 초기 작성 - 29개 시나리오 |
|     |            | - Core: M-001 ~ M-012 (12개) |
|     |            | - Validation: M-013 ~ M-016 (4개) |
|     |            | - Error: M-017 ~ M-019 (3개) |
|     |            | - Edge: M-020 ~ M-024 (5개) |
|     |            | - Import/Export: M-025 ~ M-027 (3개) |
|     |            | - Accessibility: M-028 ~ M-029 (2개) |
|     |            | - 우선순위 체계 도입 (P0/P1/P2) |
|     |            | - 테스트 데이터 Setup 섹션 추가 |
| 1.1 | 2025-12-12 | HTTP/SSE 타입 시나리오 추가 (RB-47) |
|     |            | - M-030: HTTP 타입 MCP 서버 추가 |
|     |            | - M-031: SSE 타입 MCP 서버 추가 |
|     |            | - M-032: 타입별 필수 필드 유효성 검증 |
|     |            | - M-033: 타입 변경 시 필드 전환 확인 |
|     |            | - 총 33개 시나리오 |
