# E2E 테스트 시나리오

## 개요

이 문서는 align-agents 웹 UI의 E2E (End-to-End) 테스트 시나리오를 정의합니다.

---

## 테스트 환경

- **도구**: Playwright
- **브라우저**: Chromium, Firefox, WebKit
- **베이스 URL**: <http://localhost:5173>
- **API 서버**: <http://localhost:3001>

---

## 시나리오 1: Dashboard 기본 기능

### 목적

Dashboard 페이지가 올바르게 로드되고 도구 정보를 표시하는지 확인

### 전제 조건

- API 서버가 실행 중
- 웹 서버가 실행 중

### 테스트 단계

1. Dashboard 페이지 접속 (`/`)
2. 페이지 제목 확인: "align-agents"
3. 도구 목록 섹션 확인
4. 최소 1개 이상의 도구 카드 표시 확인
5. 통계 정보 표시 확인

### 예상 결과

- 페이지가 정상적으로 로드됨
- 도구 목록이 표시됨
- 통계 정보가 표시됨

---

## 시나리오 2: Tools 페이지 - 도구 목록 및 정렬

### 목적

Tools 페이지에서 도구 목록이 올바르게 정렬되고 표시되는지 확인

### 전제 조건

- 최소 1개 이상의 도구가 설치됨

### 테스트 단계

1. 사이드바에서 "도구 관리" 클릭
2. URL이 `/tools`로 변경되는지 확인
3. 도구 목록이 표시되는지 확인
4. 설치된 도구가 위쪽에 표시되는지 확인
5. 미설치 도구가 아래쪽에 표시되는지 확인

### 예상 결과

- 도구 목록이 설치 상태에 따라 정렬됨
- 각 도구 카드에 이름, 경로, 상태가 표시됨

---

## 시나리오 3: Tools 페이지 - 경로 툴팁

### 목적

긴 경로에 마우스를 올렸을 때 전체 경로가 툴팁으로 표시되는지 확인

### 테스트 단계

1. Tools 페이지 접속
2. 도구 카드의 경로 요소에 마우스 오버
3. `title` 속성이 전체 경로를 포함하는지 확인

### 예상 결과

- 경로 요소에 `title` 속성이 있음
- `title` 속성이 전체 경로를 포함함

---

## 시나리오 4: Tools 페이지 - 설정 편집 버튼

### 목적

"설정 편집" 버튼이 정상 작동하는지 확인

### 전제 조건

- 최소 1개 이상의 도구가 설치됨

### 테스트 단계

1. Tools 페이지 접속
2. 설치된 도구의 "설정 편집" 버튼 클릭
3. Alert 다이얼로그가 표시되는지 확인
4. Alert 메시지에 도구 이름이 포함되는지 확인

### 예상 결과

- Alert가 표시됨
- Alert 메시지에 도구 정보가 포함됨

---

## 시나리오 5: Tools 페이지 - MCP 버튼

### 목적

Claude Desktop의 "MCP" 버튼이 MCP 페이지로 이동하는지 확인

### 전제 조건

- Claude Desktop이 설치됨

### 테스트 단계

1. Tools 페이지 접속
2. Claude Desktop 카드 찾기
3. "MCP" 버튼 클릭
4. URL이 `/mcp`로 변경되는지 확인
5. MCP 페이지가 로드되는지 확인

### 예상 결과

- MCP 페이지로 이동됨
- MCP 서버 목록이 표시됨

---

## 시나리오 6: Rules 페이지 - 조회 및 표시

### 목적

Rules 페이지에서 Master Rules가 올바르게 표시되는지 확인

### 테스트 단계

1. 사이드바에서 "Rules" 클릭
2. URL이 `/rules`로 변경되는지 확인
3. Master Rules 내용이 표시되는지 확인
4. "편집" 버튼이 표시되는지 확인

### 예상 결과

- Master Rules 내용이 표시됨
- 편집 버튼이 활성화됨

---

## 시나리오 7: Rules 페이지 - 편집 모드

### 목적

Rules 편집 기능이 정상 작동하는지 확인

### 테스트 단계

1. Rules 페이지 접속
2. "편집" 버튼 클릭
3. Textarea가 표시되는지 확인
4. Textarea에 기존 내용이 로드되는지 확인
5. 텍스트 수정
6. "취소" 버튼 클릭
7. 읽기 모드로 복귀하는지 확인
8. 변경 사항이 폐기되는지 확인

### 예상 결과

- 편집 모드로 전환됨
- 텍스트 수정 가능
- 취소 시 변경 사항이 폐기됨

---

## 시나리오 8: Rules 페이지 - 저장 기능

### 목적

Rules 저장 기능이 정상 작동하는지 확인

### 테스트 단계

1. Rules 페이지 접속
2. "편집" 버튼 클릭
3. 텍스트 수정 (예: "# Test Rules" 추가)
4. "저장" 버튼 클릭
5. Alert 확인 ("Rules가 저장되었습니다")
6. 읽기 모드로 복귀하는지 확인
7. 변경 사항이 반영되는지 확인

### 예상 결과

- 저장 성공 메시지 표시
- 변경 사항이 저장됨

---

## 시나리오 9: MCP 페이지 - 조회 및 표시

### 목적

MCP 페이지에서 서버 목록이 올바르게 표시되는지 확인

### 테스트 단계

1. 사이드바에서 "MCP 서버" 클릭
2. URL이 `/mcp`로 변경되는지 확인
3. MCP 서버 목록이 표시되는지 확인
4. 각 서버의 이름과 명령어가 표시되는지 확인

### 예상 결과

- MCP 서버 목록이 표시됨
- 서버 정보가 올바르게 표시됨

---

## 시나리오 10: MCP 페이지 - JSON 편집 모드

### 목적

MCP JSON 편집 기능이 정상 작동하는지 확인

### 테스트 단계

1. MCP 페이지 접속
2. "편집" 버튼 클릭
3. Textarea가 표시되는지 확인
4. JSON 형식이 올바른지 확인 (들여쓰기 2칸)
5. JSON 수정
6. "취소" 버튼 클릭
7. 읽기 모드로 복귀하는지 확인

### 예상 결과

- JSON 편집 모드로 전환됨
- 올바른 JSON 형식으로 표시됨
- 취소 시 변경 사항이 폐기됨

---

## 시나리오 11: MCP 페이지 - JSON 유효성 검증

### 목적

잘못된 JSON 입력 시 에러 메시지가 표시되는지 확인

### 테스트 단계

1. MCP 페이지 접속
2. "편집" 버튼 클릭
3. 잘못된 JSON 입력 (예: `{invalid}`)
4. "저장" 버튼 클릭
5. Alert 확인 ("JSON 형식 오류")

### 예상 결과

- 에러 메시지가 표시됨
- 저장이 실패함

---

## 시나리오 12: Rules 동기화 - 전체 도구

### 목적

전체 도구에 Rules 동기화가 정상 작동하는지 확인

### 테스트 단계

1. Rules 페이지 접속
2. "전체 동기화" 버튼 클릭
3. Alert 확인 ("동기화 완료: X/Y 성공")
4. 성공 개수가 0보다 큰지 확인

### 예상 결과

- 동기화가 실행됨
- 결과 메시지가 표시됨

---

## 시나리오 13: MCP 동기화 - 단일 도구

### 목적

단일 도구에 MCP 동기화가 정상 작동하는지 확인

### 전제 조건

- Claude Desktop이 설치됨

### 테스트 단계

1. MCP 페이지 접속
2. 도구 목록에서 "Claude Desktop" 선택
3. "동기화" 버튼 클릭
4. Alert 확인 (동기화 결과)

### 예상 결과

- 동기화가 실행됨
- 결과 메시지가 표시됨

---

## 시나리오 14: 네비게이션 테스트

### 목적

모든 페이지 간 네비게이션이 정상 작동하는지 확인

### 테스트 단계

1. Dashboard → Tools → Rules → MCP → Dashboard 순서로 이동
2. 각 페이지가 올바르게 로드되는지 확인
3. URL이 올바르게 변경되는지 확인
4. 브라우저 뒤로가기/앞으로가기 테스트

### 예상 결과

- 모든 페이지 이동이 정상 작동
- URL이 올바르게 변경됨
- 브라우저 히스토리가 정상 작동

---

## 비기능 요구사항 테스트

### 성능

- 페이지 로드 시간 < 2초
- API 응답 시간 < 1초

### 접근성

- 키보드 네비게이션 가능
- 스크린 리더 호환

### 반응형

- 모바일 화면에서 정상 표시
- 태블릿 화면에서 정상 표시

---

## 테스트 실행 방법

```bash
# Playwright 설치
npm install -D @playwright/test

# 테스트 실행
npm run test:e2e

# UI 모드로 실행
npm run test:e2e:ui

# 특정 브라우저만 테스트
npm run test:e2e -- --project=chromium
```
