# align-agents PRD (Product Requirements Document)

> **버전**: 2.0
> **최종 수정일**: 2025년 12월
> **상태**: 릴리즈

---

## 1. 제품 개요

### 1.1 배경 및 문제 정의

현대 개발 환경에서 개발자들은 다양한 AI 도구(Claude Desktop, Cursor, Gemini CLI, Codex 등)를 동시에 사용합니다. 각 도구는 고유한 설정 방식과 파일 경로를 가지며, 이로 인해 다음과 같은 문제가 발생합니다:

| 문제 | 영향 |
|------|------|
| **설정 파편화** | 동일한 MCP 서버를 여러 도구에 중복 설정해야 함 |
| **Rules 불일치** | 팀원마다 다른 코딩 가이드라인 적용 |
| **관리 복잡성** | 도구별로 설정 파일 위치와 형식이 상이 |
| **롤백 어려움** | 설정 변경 이력 추적 불가 |

### 1.2 솔루션

**align-agents**는 AI 도구 설정을 중앙에서 관리하고 동기화하는 CLI 도구입니다.

```
┌─────────────────────────────────────────────────────────┐
│                    align-agents                         │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐  │
│  │   Rules     │    │  MCP Sets   │    │   History   │  │
│  │   저장소    │    │   저장소     │    │   Manager   │  │
│  └──────┬──────┘    └──────┬──────┘    └─────────────┘  │
│         │                  │                            │
│         └────────┬─────────┘                            │
│                  ▼                                      │
│         ┌───────────────┐                               │
│         │  Sync Engine  │                               │
│         └───────┬───────┘                               │
└─────────────────┼───────────────────────────────────────┘
                  │
    ┌─────────────┼─────────────┬─────────────┐
    ▼             ▼             ▼             ▼
┌───────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐
│Claude │   │ Cursor  │   │ Gemini  │   │  Codex  │
│Desktop│   │   IDE   │   │   CLI   │   │   CLI   │
└───────┘   └─────────┘   └─────────┘   └─────────┘
```

### 1.3 가치 제안 (Value Proposition)

| 대상 | 가치 |
|------|------|
| **개인 개발자** | 여러 AI 도구의 설정을 한 곳에서 관리, 시간 절약 |
| **팀 리더** | 팀 전체에 일관된 코딩 규칙과 MCP 설정 배포 |
| **새 팀원** | 빠른 개발 환경 세팅 (전체 동기화 한 번으로 완료) |

---

## 2. 목표 및 성공 지표

### 2.1 제품 목표

1. **통합 관리**: 8개 AI 도구의 설정을 단일 인터페이스로 관리
2. **일관성 보장**: 팀 전체에 동일한 Rules와 MCP 설정 적용
3. **안전한 변경**: 자동 백업 및 히스토리 기반 롤백 지원

### 2.2 성공 지표 (KPI)

| 지표 | 목표 |
|------|------|
| 지원 AI 도구 수 | 8개 |
| 동기화 성공률 | 99% 이상 |
| 설정 변경 → 전체 배포 시간 | 1분 이내 |
| 롤백 가능 히스토리 | 최소 10개 버전 |

---

## 3. 핵심 기능

### 3.1 Rules 관리 (Priority 1)

**Rules**는 AI 도구에 적용되는 코딩 가이드라인 및 시스템 지침입니다.

#### 주요 기능
- **중앙 저장소**: 여러 Rules를 저장하고 필요에 따라 선택
- **자동 변환**: 선택한 Rules를 각 도구의 형식으로 변환 (CLAUDE.md, GEMINI.md, .cursorrules 등)
- **전역/프로젝트 동기화**: 전역 설정 또는 특정 프로젝트에만 적용 선택

#### 사용자 스토리
> "팀의 새로운 코딩 컨벤션을 모든 AI 도구에 즉시 적용하고 싶다"

### 3.2 MCP 관리 (Priority 2)

**MCP (Model Context Protocol)**는 AI 도구가 외부 서비스(DB, API 등)와 연동하는 설정입니다.

#### 주요 기능
- **MCP Definitions**: 개별 MCP 서버 정의 관리
- **MCP Sets**: 여러 MCP 서버를 그룹으로 묶어 관리
- **선택적 동기화**: 도구별로 필요한 MCP만 선택하여 적용

#### 사용자 스토리
> "PostgreSQL MCP를 Claude와 Codex에만 적용하고 싶다"

### 3.3 자동 탐지 (Auto Detection)

시스템에 설치된 AI 도구를 자동으로 감지합니다.

#### 탐지 방법 (우선순위 순)
1. **설정 파일 확인**: 각 도구의 설정 파일 존재 여부
2. **애플리케이션 경로**: `/Applications/` 내 앱 존재 여부
3. **CLI 명령어**: `which` 명령어로 실행 파일 확인

### 3.4 히스토리 관리

모든 설정 변경을 추적하고 필요시 이전 상태로 복원합니다.

#### 주요 기능
- **버전 기록**: Rules 및 MCP 설정 변경 이력 저장
- **롤백**: 문제 발생 시 특정 버전으로 복원
- **자동 백업**: 동기화 전 자동으로 `.backup` 폴더에 백업

### 3.5 동기화 전략

상황에 맞는 3가지 동기화 방식을 제공합니다.

| 전략 | 설명 | 사용 상황 |
|------|------|----------|
| **Overwrite** | 기존 설정 완전 교체 | 초기 세팅, 대규모 변경 |
| **Merge** | 기존 설정 뒤에 추가 | 기존 설정 유지하며 추가 |
| **Smart Update** | 마커 영역만 업데이트 | 사용자 커스텀 설정 보존 |

---

## 4. 인터페이스

align-agents는 **CLI**와 **Web UI** 두 가지 인터페이스를 제공합니다.

| 인터페이스 | 특징 | 적합한 사용자 |
|-----------|------|--------------|
| **CLI** | 스크립트 자동화, 빠른 실행 | 개발자, DevOps |
| **Web UI** | 시각적 관리, 편집 용이 | 모든 사용자 |

> 📖 CLI/Web UI 상세 기능은 [기능 명세](features.md) 문서를 참조하세요.

---

## 5. 지원 환경

### 5.1 플랫폼
- **운영체제**: macOS (우선 지원)
- **런타임**: Node.js 18+

### 5.2 지원 AI 도구

| 도구 | MCP 지원 | Rules 지원 | Rules 파일 |
|------|:--------:|:----------:|-----------|
| Claude Desktop | ✅ | - | - |
| Cursor IDE | - | ✅ | .cursorrules |
| Claude Code CLI | - | ✅ | CLAUDE.md |
| Gemini CLI | - | ✅ | GEMINI.md |
| Codex CLI | ✅ | ✅ | AGENTS.md |
| Qwen CLI | - | - | - |
| GitHub Copilot CLI | - | - | - |
| Windsurf IDE | - | - | - |

---

## 6. 비기능 요구사항

### 6.1 보안
- 설정 변경 시 자동 백업 생성
- 민감 정보(API 키 등)는 환경 변수로 관리 권장

### 6.2 확장성
- 새로운 AI 도구 추가를 위한 플러그인 구조
- Tool Registry 기반의 유연한 도구 정의

### 6.3 사용성
- 모든 UI 및 문서 한국어 지원
- CLI와 Web UI 동일 기능 제공

---

## 7. 로드맵

### Phase 1 (완료)
- [x] 8개 AI 도구 지원
- [x] Rules 동기화
- [x] MCP 동기화
- [x] Web UI 대시보드
- [x] 히스토리 관리

### Phase 2 (계획)
- [ ] Windows/Linux 지원
- [ ] 팀 공유 기능 (클라우드 동기화)
- [ ] Rules 템플릿 마켓플레이스
- [ ] MCP 서버 헬스체크

---

## 8. 부록

### 관련 문서
- [용어 정의](glossary.md)
- [사용자 시나리오](user-scenarios.md)
- [기능 명세](features.md)
- [지원 도구 상세](supported-tools.md)
